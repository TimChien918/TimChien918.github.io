<!DOCTYPE html><html><head><meta charset='utf-8'><meta http-equiv='Access-Control-Allow-Headers' content='Origin, X-Requested-With, Content-Type, Accept'><meta http-equiv='Access-Control-Allow-Methods' content='GET,POST,PUT,DELETE,OPTIONS'><meta http-equiv='Access-Control-Allow-Origin' content='*'><meta http-equiv='Access-Control-Allow-Credentials' content='true'><script src='https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js'></script><script src='https://fustyles.github.io/webduino/SpBlocklyJS/GameElements_20190131/marked.min.js'></script><script src='https://fustyles.github.io/webduino/SpBlocklyJS/GameElements_20190131/gameelements.js'></script><link rel='stylesheet' href='https://fustyles.github.io/webduino/SpBlocklyJS/css/icon_custom.css' /><script src='https://fustyles.github.io/webduino/SpBlocklyJS/hands_20220614/hands_video.js'></script><script src='https://fustyles.github.io/webduino/SpBlocklyJS/hands_20220614/hands.js'></script><script src='https://fustyles.github.io/webduino/SpBlocklyJS/SpreadsheetSQL_20210403/spreadsheetsql.js'></script><script src='https://fustyles.github.io/webduino/SpBlocklyJS/SpreadsheetSQL_20210403/loader.js'></script><script src='https://fustyles.github.io/webduino/SpBlocklyJS/TextToSpeech_20220729/texttospeech.js'></script><script src='https://fustyles.github.io/webduino/SpBlocklyJS/line_20220729/line.js'></script><script src='https://cdnjs.cloudflare.com/ajax/libs/crypto-js/3.1.2/rollups/aes.js'></script><script src='https://fustyles.github.io/webduino/SpBlocklyJS/gemini_20240209/gemini.js'></script><script src='https://fustyles.github.io/webduino/SpBlocklyJS/audioRecord_20250405/audioRecord.js'></script></head><body>
<script>
const delay = (seconds) => {
    return new Promise((resolve) => {
        setTimeout(resolve, seconds * 1000);
    });
};
const main = async () => {
    var _E5_8E_9F_E5_A7_8B_E5_AF_86_E7_A2_BC1, palm_size, Back_of_hand_size, _E5_8E_9F_E5_A7_8B_E5_AF_86_E7_A2_BC2, question, Trial_calculation_table_URL, _E5_8A_A0_E5_AF_86_E5_AF_86_E7_A2_BC1, Voice_Prompt, _E5_8A_A0_E5_AF_86_E5_AF_86_E7_A2_BC2, answer, Traditional_Chinese_Medicine_Website, palm, i, Voice_reading_status, width, Voice_recognition_status, Acupoint_Database, Traditional_Chinese_Medicine_Prompt, Translation_Prompt;

    // 描述此函式...
    function _E8_AE_8A_E6_95_B8() {
        _E5_8E_9F_E5_A7_8B_E5_AF_86_E7_A2_BC1 = 'AIzaSyBqAiiDHMKXHr8j';
        _E5_8E_9F_E5_A7_8B_E5_AF_86_E7_A2_BC2 = 'AHLmCWN85CTat3tZTP0';
        _E5_8A_A0_E5_AF_86_E5_AF_86_E7_A2_BC1 = (CryptoJS.AES.encrypt(_E5_8E_9F_E5_A7_8B_E5_AF_86_E7_A2_BC1, 'LLM1').toString());
        _E5_8A_A0_E5_AF_86_E5_AF_86_E7_A2_BC2 = (CryptoJS.AES.encrypt(_E5_8E_9F_E5_A7_8B_E5_AF_86_E7_A2_BC2, 'LLM2').toString());
        answer = '回答';
        question = '問題';
        Trial_calculation_table_URL = 'https://docs.google.com/spreadsheets/d/12DBfaxVzqMqpCxfaMV47QzgJupS7SZ9YtYLWGExvUh4/edit?usp=sharing';
        Traditional_Chinese_Medicine_Website = 'https://cloudtcm.com/shu/list/414/0';
        palm = '';
        width = 500;
        palm_size = 0;
        Acupoint_Database = ['陽池穴', '少澤穴', '落枕穴', '合谷穴', '少衝穴', '商陽穴', '陽谿穴', '中渚穴', '內關穴', '魚際穴', '太淵穴', '中衝穴', '列缺穴', '前谷穴', '神門穴', '三間穴', '二間穴', '后溪穴', '勞宮穴', '井穴'];
        Traditional_Chinese_Medicine_Prompt = ['你是具有中醫診斷和治療能力的專業中醫師，請你不要引用你內建的中醫知識。且請把(雲端中醫https://cloudtcm.com/shu/list/414/0)網頁內容作先備知識。患者將描述症狀，一步一步慢慢思考，請依據刺灸新法、針灸科學，並且專業診斷，針對患者的疾病，給予針灸治療方案。請確保回應包含中醫針灸部位，提供手掌2個對應症狀的穴位來紓解病痛，請說30字以內。準備好後請告訴我', '你回來的穴位中，一定要有這些穴的其中一個', Acupoint_Database].join('');
        Translation_Prompt = ['1.Please use / to separate the three languages. This is necessary. Please remember that even if two of the three languages are the same, you still have to separate them.', '2. Please help me translate, but please strictly follow the sentence structure I specified. The sentence structure is: The language I used when asking you questions (please modify the language name according to the language I used in the conversation. Please say the name directly, do not use the language I used in the conversation, and do not repeat what I said) : Your answer (please use the language I used when asking the question)/Traditional Chinese: Your answer is translated into Chinese,/English: Your answer is translated into English', 'Here is an example. If your answer is: 你好, you need to reply, Traditional Chinese: 你好/Traditional Chinese:你好/English: Hello', 'Let me give you another example. If you want to say: Hello, you should reply, English: Hello/ Traditional Chinese:你好/English: Hello', '3.Please note that even if I use Chinese or English, you still need to translate', '4.You don\'t need to translate what I say', '5.When using the separator, please do not squeeze two languages together and translate them twice.', '6.To avoid automatic segmentation errors, please do not use “/".in places other than where segmentation is required.', '7.Please respond strictly according to the format I gave you.', '8.Please do not simplify the English translation'].join('');
        Voice_reading_status = false;
        Voice_recognition_status = false;
        Voice_Prompt = ['You are a professional voice transcriptionist who will transcribe everything I say into text and you will follow the following rules:', '1. Transcribe the audio into text.\\n', '2. Do not use markdown syntax in reply.', '3.Please consider Chinese or English first when listening', '4.What I\'m asking for, please don\'t output anything else.'].join('');
    }

    // 描述此函式...
    async function Send_a_conversation() {
        div_set('', "innerHTML", ([fontText(3, '#cc0000', 'Arial', (textarea_get('', "value"))), '<br>', '<br>', div_get('', "innerHTML")].join('')));
        question = (textarea_get('', "value"));
        await gemini_chat_run((String(textarea_get('', "value")) + '請回答我對應的穴位'));
        textarea_set('', "value", '');
    }

    // 描述此函式...
    async function Identify() {
        async function textarea__keydown(event) {
            if (event.keyCode == 13) {
                Send_a_conversation();
                await delay(0.1);
                textarea_set('', "value", '');
            }
        };
        document.getElementById('gametextarea_' + '').addEventListener("keydown", textarea__keydown, true);
        async function textarea__focus(event) {
            element_select("gametextarea_");
        };
        document.getElementById('gametextarea_' + '').addEventListener("focus", textarea__focus, true);
        async function gemini_chat_response(gemini_chat_data) {
            answer = (gemini_chat_response_br(gemini_chat_data, ''));
            answer = (gemini_chat_response_br(gemini_chat_data, '')).split('/');
            div_set('', "innerHTML", ([fontText(3, '#33cc00', 'Arial', (answer[0])), '<br>', '<br>', div_get('', "innerHTML")].join('')));
            await ttsSpeak(("Eddy (英文（美國）)"), (answer[0]));
            spreadsheet_insert("insertlast", String("gmt_datetime") + "|" + String(question) + "|" + String(answer[0]) + "|" + String(answer[1]) + "|" + String(answer[2]), 0, 0, "", Trial_calculation_table_URL, '病症', "https://script.google.com/macros/s/AKfycbxA3hhTlntwVTOcqngOC_iJL_zLmRwzcDbMYDs7FD8iinNsY9XZsMkD7AcXTIUbEc33EA/exec");
            i = setDatetime(0, 0, 0, 0, 0, 0);
            linebot_push_message('jHELtzp2oiHQK5sdSciRYvNi2FIwZiCbVhjRoxvhuzXVZCHGx6PtY6BqGJS6OyYL7AE42vqyzPikesqbLb+mE2kj06X5YofYiSAM9YAA0+1Phs2pSKrlhtDVOTc479rvHLz6lW9MPdPLIxyAk31bTQdB04t89/1O/w1cDnyilFU=', 'U119e52abd339210576e354879f5ce368', line_url_escape("bot", "text", ([getDatetime(i, "datetime"), '<br>', 'Question:' + String(question), '<br>', '<br>', answer[0], '<br>', '<br>', answer[1], '<br>', '<br>', answer[2]].join('')), '', '', ''));
            select_set('手掌', "value", '無');
            div_set('c', "innerHTML", ([fontText(3, '#33cc00', 'Arial', (answer[1])), '<br>', '<br>', div_get('c', "innerHTML")].join('')));
            div_set('e', "innerHTML", ([fontText(3, '#33cc00', 'Arial', (answer[2])), '<br>', '<br>', div_get('e', "innerHTML")].join('')));
            palm = answer[1];

        }
        window.gemini_chat_response = gemini_chat_response;
        async function gamebutton_replay_onclick(event) {
            gemini_chat_clear();
            div_set('', "innerHTML", '');
            textarea_set('', "value", '');
        };
        document.getElementById("gamebutton_replay").addEventListener("click", gamebutton_replay_onclick, true);
        async function gamebutton_save_onclick(event) {
            gemini_chat_content_file("save");
        };
        document.getElementById("gamebutton_save").addEventListener("click", gamebutton_save_onclick, true);
        async function gamebutton_upload_file_onclick(event) {
            div_set('', "innerHTML", '');
            gemini_chat_content_file("open");
        };
        document.getElementById("gamebutton_upload_file").addEventListener("click", gamebutton_upload_file_onclick, true);
        async function gamebutton_volume_off_onclick(event) {
            if (Voice_reading_status) {
                ttsSwitch(0);
                button_set('volume_off', "value", 'Turn on the speaker');
                button_set('mic_off', "color", '#000000');
                ttsState("cancel");
            } else {
                ttsSwitch(1);
                button_set('volume_off', "value", 'Turn off the speaker');
                button_set('mic_off', "color", '#ff0000');
            }
            Voice_reading_status = !Voice_reading_status;
        };
        document.getElementById("gamebutton_volume_off").addEventListener("click", gamebutton_volume_off_onclick, true);
        async function gamebutton_mic_off_onclick(event) {
            if (Voice_recognition_status) {
                button_set('mic_off', "value", 'Click me to record');
                button_set('mic_off', "color", '#000000');
                await recording_stopRecordingGeminiSTT();
                await delay(1);
            } else {
                button_set('mic_off', "value", 'Recording...');
                button_set('mic_off', "color", '#ff0000');
                await recording_startRecording();
            }
            Voice_recognition_status = !Voice_recognition_status;
        };
        document.getElementById("gamebutton_mic_off").addEventListener("click", gamebutton_mic_off_onclick, true);
        async function gamebutton_wechat_onclick(event) {
            Send_a_conversation();
        };
        document.getElementById("gamebutton_wechat").addEventListener("click", gamebutton_wechat_onclick, true);
    }

    // 描述此函式...
    function Yuji() {
        palm_size = (hands_distance((hands_position(0, "3", "x")), (hands_position(0, "3", "y")), (hands_position(0, "2", "x")), (hands_position(0, "2", "y")))) * 0.3;
        image_set('手掌', "height", palm_size);
        image_set('手掌', "width", palm_size);
        image_set('手掌', "left", (400 + ((((hands_position(0, "2", "x")) + (hands_position(0, "1", "x"))) / 2 - palm_size / 2) - palm_size / 2)));
        image_set('手掌', "top", (((hands_position(0, "2", "y")) + (hands_position(0, "1", "y"))) / 2 - palm_size / 2));
        span_set('手掌', "fontsize", palm_size);
        span_set('手掌', "display", true);
        span_set('手掌', "innerHTML", ('魚際' + '穴'));
        span_set('手掌', "left", (image_get('手掌', "left")));
        span_set('手掌', "top", ((image_get('手掌', "top")) - (palm_size + palm_size / 2)));
    }

    // 描述此函式...
    function Nei_Guan() {
        palm_size = Math.abs((hands_angle((hands_position(0, "0", "x")), (hands_position(0, "0", "y")), (hands_position(0, "9", "x")), (hands_position(0, "9", "y")))) / 1.5 - ((hands_angle((hands_position(0, "0", "x")), (hands_position(0, "0", "y")), (hands_position(0, "9", "x")), (hands_position(0, "9", "y")))) - (hands_angle((hands_position(0, "0", "x")), (hands_position(0, "0", "y")), (hands_position(0, "9", "x")), (hands_position(0, "9", "y")))) / 1.5)) / 2;
        palm_size = palm_size * 0.9;
        image_set('手掌', "height", palm_size);
        image_set('手掌', "left", (400 + (((hands_position(0, "0", "x")) * 2 - (hands_position(0, "9", "x")) * 1) / (2 - 1) - palm_size / 2)));
        image_set('手掌', "top", (((hands_position(0, "0", "y")) * 2 - (hands_position(0, "9", "y")) * 1) / (2 - 1) - palm_size / 2));
        span_set('手掌', "fontsize", palm_size);
        span_set('手掌', "display", true);
        span_set('手掌', "innerHTML", ('內關' + '穴'));
        span_set('手掌', "left", (image_get('手掌', "left")));
        span_set('手掌', "top", ((image_get('手掌', "top")) - (palm_size + palm_size / 2)));
        image_set('手掌', "width", palm_size);
    }

    // 描述此函式...
    function Tai_Yuan() {
        palm_size = (hands_distance((hands_position(0, "1", "x")), (hands_position(0, "1", "y")), (hands_position(0, "0", "x")), (hands_position(0, "0", "y")))) / 2;
        palm_size = palm_size * 0.6;
        image_set('手掌', "height", palm_size);
        image_set('手掌', "width", palm_size);
        image_set('手掌', "left", (400 + (((hands_position(0, "1", "x")) + (hands_position(0, "0", "x"))) / 2 - palm_size / 2)));
        image_set('手掌', "top", ((hands_position(0, "0", "y")) - palm_size / 2));
        span_set('手掌', "fontsize", palm_size);
        span_set('手掌', "display", true);
        span_set('手掌', "innerHTML", ('太淵' + '穴'));
        span_set('手掌', "left", (image_get('手掌', "left")));
        span_set('手掌', "top", ((image_get('手掌', "top")) - (palm_size + palm_size / 2)));
    }

    // 描述此函式...
    function Zhongchong() {
        palm_size = Math.abs(hands_distance((hands_position(0, "12", "x")), (hands_position(0, "12", "y")), (hands_position(0, "11", "x")), (hands_position(0, "11", "y"))));
        palm_size = palm_size * 0.5;
        image_set('手掌', "height", palm_size);
        image_set('手掌', "width", palm_size);
        image_set('手掌', "left", (400 + ((hands_position(0, "12", "x")) - palm_size / 2)));
        image_set('手掌', "top", ((hands_position(0, "12", "y")) - palm_size));
        span_set('手掌', "fontsize", palm_size);
        span_set('手掌', "display", true);
        span_set('手掌', "innerHTML", ('中衝' + '穴'));
        span_set('手掌', "left", (image_get('手掌', "left")));
        span_set('手掌', "top", ((image_get('手掌', "top")) + palm_size + palm_size / 2));
    }

    // 描述此函式...
    function Qiang_Gu() {
        image_set('手掌', "url", 'https://timchien918.github.io/acupointhalf.png');
        palm_size = (hands_distance((hands_position(0, "6", "x")), (hands_position(0, "6", "y")), (hands_position(0, "7", "x")), (hands_position(0, "7", "y"))));
        palm_size = palm_size * 0.7;
        image_set('手掌', "height", (palm_size * 0.5));
        image_set('手掌', "width", palm_size);
        image_set('手掌', "left", (400 + ((hands_position(0, "17", "x")) - palm_size * 0.7)));
        image_set('手掌', "top", ((hands_position(0, "17", "y")) - palm_size * 0.25));
        image_set('手掌', "rotateZ", (hands_angle((hands_position(0, "0", "x")), (hands_position(0, "0", "y")), (hands_position(0, "17", "x")), (hands_position(0, "17", "y")))));
        span_set('手掌', "fontsize", palm_size);
        span_set('手掌', "display", true);
        span_set('手掌', "innerHTML", ('前谷' + '穴'));
        span_set('手掌', "left", (image_get('手掌', "left")));
        span_set('手掌', "top", ((image_get('手掌', "top")) - (palm_size + palm_size / 2)));
    }

    // 描述此函式...
    function Shenmen() {
        palm_size = (hands_distance((hands_position(0, "5", "x")), (hands_position(0, "5", "y")), (hands_position(0, "9", "x")), (hands_position(0, "9", "y")))) * 0.5;
        image_set('手掌', "height", palm_size);
        image_set('手掌', "width", palm_size);
        image_set('手掌', "left", (400 + (((hands_position(0, "9", "x")) - ((hands_position(0, "5", "x")) - (hands_position(0, "0", "x"))) * 1) - palm_size / 2)));
        image_set('手掌', "top", (((hands_position(0, "9", "y")) - ((hands_position(0, "5", "y")) - (hands_position(0, "0", "y"))) * 1) - palm_size / 2));
        span_set('手掌', "fontsize", palm_size);
        span_set('手掌', "display", true);
        span_set('手掌', "innerHTML", ('神門' + '穴'));
        span_set('手掌', "left", (image_get('手掌', "left")));
        span_set('手掌', "top", ((image_get('手掌', "top")) - (palm_size + palm_size / 2)));
    }

    // 描述此函式...
    function Third_Point() {
        image_set('手掌', "url", 'https://timchien918.github.io/acupointhalf.png');
        palm_size = (hands_distance((hands_position(0, "5", "x")), (hands_position(0, "5", "y")), (hands_position(0, "9", "x")), (hands_position(0, "9", "y")))) / 2;
        image_set('手掌', "rotateZ", (180 + (hands_angle((hands_position(0, "5", "x")), (hands_position(0, "5", "y")), (hands_position(0, "6", "x")), (hands_position(0, "6", "y"))))));
        image_set('手掌', "height", (palm_size * 0.7));
        image_set('手掌', "width", palm_size);
        image_set('手掌', "left", (400 + (((hands_position(0, "5", "x")) + (hands_position(0, "6", "x"))) / 2 - palm_size * 0.2)));
        image_set('手掌', "top", (((hands_position(0, "5", "y")) + (hands_position(0, "6", "y"))) / 2 - palm_size / 2));
        span_set('手掌', "fontsize", palm_size);
        span_set('手掌', "display", true);
        span_set('手掌', "innerHTML", ('三間' + '穴'));
        span_set('手掌', "left", (image_get('手掌', "left")));
        span_set('手掌', "top", ((image_get('手掌', "top")) - (palm_size + palm_size / 2)));
    }

    // 描述此函式...
    function _E4_BA_95_E7_A9_B4() {
        image_set('手掌', "url", 'https://timchien918.github.io/acupointhalf.png');
        palm_size = (hands_distance((hands_position(0, "5", "x")), (hands_position(0, "5", "y")), (hands_position(0, "9", "x")), (hands_position(0, "9", "y")))) / 2;
        image_set('手掌', "rotateZ", (180 + (hands_angle((hands_position(0, "5", "x")), (hands_position(0, "5", "y")), (hands_position(0, "6", "x")), (hands_position(0, "6", "y"))))));
        image_set('手掌', "height", (palm_size * 0.7));
        image_set('手掌', "width", palm_size);
        image_set('手掌', "left", (400 + ((hands_position(0, "8", "x")) - palm_size * 0.2)));
        image_set('手掌', "top", ((hands_position(0, "8", "y")) - palm_size / 2));
        span_set('手掌', "fontsize", palm_size);
        span_set('手掌', "display", true);
        span_set('手掌', "innerHTML", '井穴');
        span_set('手掌', "left", (image_get('手掌', "left")));
        span_set('手掌', "top", ((image_get('手掌', "top")) - (palm_size + palm_size / 2)));
    }

    // 描述此函式...
    function Hou_Xi() {
        image_set('手掌', "url", 'https://timchien918.github.io/acupointhalf.png');
        palm_size = (hands_angle((hands_position(0, "0", "x")), (hands_position(0, "0", "y")), (hands_position(0, "17", "x")), (hands_position(0, "17", "y")))) / 4;
        image_set('手掌', "rotateZ", (hands_angle((hands_position(0, "0", "x")), (hands_position(0, "0", "y")), (hands_position(0, "17", "x")), (hands_position(0, "17", "y")))));
        image_set('手掌', "height", (palm_size / 2));
        image_set('手掌', "width", palm_size);
        image_set('手掌', "left", (400 + (((hands_position(0, "0", "x")) + (hands_position(0, "17", "x")) * 4) / 5 - palm_size * 1.2)));
        image_set('手掌', "top", (((hands_position(0, "0", "y")) + (hands_position(0, "17", "y")) * 4) / 5 - palm_size * 0.25));
        span_set('手掌', "fontsize", palm_size);
        span_set('手掌', "display", true);
        span_set('手掌', "innerHTML", ('后溪' + '穴'));
        span_set('手掌', "left", (image_get('手掌', "left")));
        span_set('手掌', "top", ((image_get('手掌', "top")) - (palm_size + palm_size / 2)));
    }

    // 描述此函式...
    function Second_Point() {
        image_set('手掌', "url", 'https://timchien918.github.io/acupointhalf.png');
        palm_size = (hands_distance((hands_position(0, "5", "x")), (hands_position(0, "5", "y")), (hands_position(0, "9", "x")), (hands_position(0, "9", "y")))) / 2;
        image_set('手掌', "rotateZ", (180 + (hands_angle((hands_position(0, "5", "x")), (hands_position(0, "5", "y")), (hands_position(0, "6", "x")), (hands_position(0, "6", "y"))))));
        image_set('手掌', "height", palm_size);
        image_set('手掌', "width", (palm_size * 1.5));
        image_set('手掌', "left", (400 + ((hands_position(0, "5", "x")) - palm_size * 0.2)));
        image_set('手掌', "top", ((hands_position(0, "5", "y")) - palm_size / 2));
        span_set('手掌', "fontsize", palm_size);
        span_set('手掌', "display", true);
        span_set('手掌', "innerHTML", ('二間' + '穴'));
        span_set('手掌', "left", (image_get('手掌', "left")));
        span_set('手掌', "top", ((image_get('手掌', "top")) - (palm_size + palm_size / 2)));
    }

    // 描述此函式...
    function _E5_8B_9E_E5_AE_AE() {
        palm_size = Math.abs((hands_distance((hands_position(0, "0", "x")), (hands_position(0, "0", "y")), (hands_position(0, "9", "x")), (hands_position(0, "9", "y")))) / 1.6 - ((hands_distance((hands_position(0, "0", "x")), (hands_position(0, "0", "y")), (hands_position(0, "9", "x")), (hands_position(0, "9", "y")))) - (hands_distance((hands_position(0, "0", "x")), (hands_position(0, "0", "y")), (hands_position(0, "9", "x")), (hands_position(0, "9", "y")))) / 1.6)) * 0.5;
        image_set('手掌', "height", palm_size);
        image_set('手掌', "width", palm_size);
        image_set('手掌', "left", (400 + ((hands_position(0, "9", "x")) - palm_size / 2)));
        image_set('手掌', "top", ((hands_position(0, "5", "y")) + ((hands_distance((hands_position(0, "0", "x")), (hands_position(0, "0", "y")), (hands_position(0, "9", "x")), (hands_position(0, "9", "y")))) / 1.6 - palm_size / 2) / 2));
        span_set('手掌', "fontsize", palm_size);
        span_set('手掌', "display", true);
        span_set('手掌', "innerHTML", ('勞宮' + '穴'));
        span_set('手掌', "left", (image_get('手掌', "left")));
        span_set('手掌', "top", ((image_get('手掌', "top")) - (palm_size + palm_size / 2)));
    }

    // 描述此函式...
    function Yangxi_acupoint() {
        Back_of_hand_size = (hands_distance((hands_position(0, "2", "x")), (hands_position(0, "2", "y")), (hands_position(0, "1", "x")), (hands_position(0, "1", "y")))) / 2;
        Back_of_hand_size = Back_of_hand_size / 2;
        image_set('手背', "url", 'https://timchien918.github.io/acupointhalf.png');
        image_set('手背', "height", Back_of_hand_size);
        image_set('手背', "width", (Back_of_hand_size * 1.5));
        image_set('手背', "rotateZ", (0 + (hands_angle((hands_position(0, "0", "x")), (hands_position(0, "0", "y")), (hands_position(0, "1", "x")), (hands_position(0, "1", "y"))))));
        image_set('手背', "left", (400 + (((hands_position(0, "0", "x")) + (hands_position(0, "1", "x"))) / 2 - Back_of_hand_size)));
        image_set('手背', "top", (((hands_position(0, "0", "y")) + (hands_position(0, "1", "y"))) / 2 - Back_of_hand_size / 2));
        span_set('手背', "fontsize", Back_of_hand_size);
        span_set('手背', "display", true);
        span_set('手背', "innerHTML", ('陽谿' + '穴'));
        span_set('手背', "left", (image_get('手背', "left")));
        span_set('手背', "top", ((image_get('手背', "top")) - (Back_of_hand_size + Back_of_hand_size / 2)));
    }

    // 描述此函式...
    function _E8_90_BD_E6_9E_95() {
        Back_of_hand_size = Math.abs((hands_angle((hands_position(0, "0", "x")), (hands_position(0, "0", "y")), (hands_position(0, "5", "x")), (hands_position(0, "5", "y")))) / 1.6 - ((hands_angle((hands_position(0, "0", "x")), (hands_position(0, "0", "y")), (hands_position(0, "5", "x")), (hands_position(0, "5", "y")))) - (hands_angle((hands_position(0, "0", "x")), (hands_position(0, "0", "y")), (hands_position(0, "5", "x")), (hands_position(0, "5", "y")))) / 1.6)) * 0.5;
        image_set('手背', "height", Back_of_hand_size);
        image_set('手背', "width", Back_of_hand_size);
        image_set('手背', "left", (400 + (((hands_position(0, "9", "x")) + (hands_position(0, "5", "x"))) / 2 - palm_size / 2)));
        image_set('手背', "top", ((hands_position(0, "9", "y")) + ((hands_angle((hands_position(0, "0", "x")), (hands_position(0, "0", "y")), (hands_position(0, "5", "x")), (hands_position(0, "5", "y")))) / 1.6 - Back_of_hand_size / 2) / 2));
        span_set('手背', "fontsize", Back_of_hand_size);
        span_set('手背', "display", true);
        span_set('手背', "innerHTML", ('落枕' + '穴'));
        span_set('手背', "left", (image_get('手背', "left")));
        span_set('手背', "top", ((image_get('手背', "top")) - (Back_of_hand_size + Back_of_hand_size / 2)));
    }

    // 描述此函式...
    function _E5_95_86_E9_99_BD() {
        Back_of_hand_size = (hands_distance((hands_position(0, "8", "x")), (hands_position(0, "8", "y")), (hands_position(0, "7", "x")), (hands_position(0, "7", "y")))) * 0.5;
        image_set('手背', "url", 'https://timchien918.github.io/acupointhalf.png');
        image_set('手背', "rotateZ", (180 + (hands_angle((hands_position(0, "8", "x")), (hands_position(0, "8", "y")), (hands_position(0, "7", "x")), (hands_position(0, "7", "y"))))));
        image_set('手背', "height", Back_of_hand_size);
        image_set('手背', "width", (Back_of_hand_size * 1.5));
        image_set('手背', "left", (400 + ((hands_position(0, "8", "x")) - Back_of_hand_size / 1.2)));
        image_set('手背', "top", ((hands_position(0, "8", "y")) - Back_of_hand_size / 2));
        span_set('手背', "fontsize", Back_of_hand_size);
        span_set('手背', "display", true);
        span_set('手背', "innerHTML", ('商陽' + '穴'));
        span_set('手背', "left", (image_get('手背', "left")));
        span_set('手背', "top", ((image_get('手背', "top")) - (Back_of_hand_size + Back_of_hand_size / 2)));
    }

    // 描述此函式...
    function _E5_88_97_E7_BC_BA() {
        palm_size = (hands_distance((hands_position(0, "5", "x")), (hands_position(0, "5", "y")), (hands_position(0, "9", "x")), (hands_position(0, "9", "y")))) / 2;
        image_set('手掌', "url", 'https://timchien918.github.io/acupointhalf.png');
        image_set('手掌', "height", palm_size);
        image_set('手掌', "left", ((400 + ((hands_position(0, "0", "x")) + (hands_position(0, "1", "x"))) * 0.5) - palm_size / 2));
        image_set('手掌', "top", (((hands_position(0, "0", "y")) + (hands_angle((hands_position(0, "0", "x")), (hands_position(0, "0", "y")), (hands_position(0, "9", "x")), (hands_position(0, "9", "y")))) / 3) - palm_size / 2));
        image_set('手掌', "rotateZ", (180 + (hands_angle((hands_position(0, "0", "x")), (hands_position(0, "0", "y")), (hands_position(0, "9", "x")), (hands_position(0, "9", "y"))))));
        image_set('手掌', "width", (palm_size * 1.5));
        span_set('手掌', "fontsize", palm_size);
        span_set('手掌', "display", true);
        span_set('手掌', "innerHTML", ('列缺' + '穴'));
        span_set('手掌', "left", (image_get('手掌', "left")));
        span_set('手掌', "top", ((image_get('手掌', "top")) - (palm_size + palm_size / 2)));
    }

    // 描述此函式...
    function _E5_90_88_E8_B0_B7() {
        Back_of_hand_size = Math.abs((hands_distance((hands_position(0, "0", "x")), (hands_position(0, "0", "y")), (hands_position(0, "9", "x")), (hands_position(0, "9", "y")))) / 1.6 - ((hands_distance((hands_position(0, "0", "x")), (hands_position(0, "0", "y")), (hands_position(0, "9", "x")), (hands_position(0, "9", "y")))) - (hands_distance((hands_position(0, "0", "x")), (hands_position(0, "0", "y")), (hands_position(0, "9", "x")), (hands_position(0, "9", "y")))) / 1.6)) * 0.5;
        image_set('手背', "height", Back_of_hand_size);
        image_set('手背', "width", Back_of_hand_size);
        image_set('手背', "left", (400 + ((hands_position(0, "5", "x")) - palm_size / 2)));
        image_set('手背', "top", ((hands_position(0, "5", "y")) + ((hands_distance((hands_position(0, "0", "x")), (hands_position(0, "0", "y")), (hands_position(0, "9", "x")), (hands_position(0, "9", "y")))) / 1.6 - Back_of_hand_size / 2) / 2));
        span_set('手背', "fontsize", Back_of_hand_size);
        span_set('手背', "display", true);
        span_set('手背', "innerHTML", ('合谷' + '穴'));
        span_set('手背', "left", (image_get('手背', "left")));
        span_set('手背', "top", ((image_get('手背', "top")) - (Back_of_hand_size + Back_of_hand_size / 2)));
    }

    // 描述此函式...
    function _E9_99_BD_E6_B1_A0() {
        Back_of_hand_size = (hands_distance((hands_position(0, "5", "x")), (hands_position(0, "5", "y")), (hands_position(0, "9", "x")), (hands_position(0, "9", "y")))) / 2;
        image_set('手背', "height", Back_of_hand_size);
        image_set('手背', "width", Back_of_hand_size);
        image_set('手背', "left", (400 + ((hands_position(0, "0", "x")) - Back_of_hand_size / 2)));
        image_set('手背', "top", ((hands_position(0, "0", "y")) - Back_of_hand_size / 2));
        span_set('手背', "fontsize", Back_of_hand_size);
        span_set('手背', "display", true);
        span_set('手背', "innerHTML", ('陽池' + '穴'));
        span_set('手背', "left", (image_get('手背', "left")));
        span_set('手背', "top", ((image_get('手背', "top")) - (Back_of_hand_size + Back_of_hand_size / 2)));
    }

    // 描述此函式...
    function _E4_B8_AD_E6_B8_9A() {
        Back_of_hand_size = (hands_distance((hands_position(0, "17", "x")), (hands_position(0, "17", "y")), (hands_position(0, "13", "x")), (hands_position(0, "13", "y")))) * 0.5;
        image_set('手背', "height", Back_of_hand_size);
        image_set('手背', "width", Back_of_hand_size);
        image_set('手背', "left", (400 + (((hands_position(0, "17", "x")) + (hands_position(0, "13", "x"))) / 2 - Back_of_hand_size / 2)));
        image_set('手背', "top", ((hands_position(0, "17", "y")) - Back_of_hand_size / 2));
        span_set('手背', "fontsize", Back_of_hand_size);
        span_set('手背', "display", true);
        span_set('手背', "innerHTML", ('中渚' + '穴'));
        span_set('手背', "left", (image_get('手背', "left")));
        span_set('手背', "top", ((image_get('手背', "top")) - (Back_of_hand_size + Back_of_hand_size / 2)));
    }

    // 描述此函式...
    function _E5_B0_91_E8_A1_9D() {
        Back_of_hand_size = (hands_distance((hands_position(0, "19", "x")), (hands_position(0, "19", "y")), (hands_position(0, "18", "x")), (hands_position(0, "18", "y")))) * 0.5;
        image_set('手背', "height", Back_of_hand_size);
        image_set('手背', "left", (400 + ((hands_position(0, "19", "x")) - Back_of_hand_size / 2)));
        image_set('手背', "top", ((hands_position(0, "19", "y")) - Back_of_hand_size / 2));
        image_set('手背', "url", 'https://timchien918.github.io/acupointhalf.png');
        image_set('手背', "rotateZ", (180 + (hands_angle((hands_position(0, "20", "x")), (hands_position(0, "20", "y")), (hands_position(0, "18", "x")), (hands_position(0, "18", "y"))))));
        image_set('手背', "width", (Back_of_hand_size * 1.5));
        span_set('手背', "fontsize", Back_of_hand_size);
        span_set('手背', "display", true);
        span_set('手背', "innerHTML", ('少衝' + '穴'));
        span_set('手背', "left", (image_get('手背', "left")));
        span_set('手背', "top", ((image_get('手背', "top")) - (Back_of_hand_size + Back_of_hand_size / 2)));
    }

    // 描述此函式...
    function _E5_B0_91_E6_BE_A4() {
        image_set('手背', "url", 'https://timchien918.github.io/acupointhalf.png');
        Back_of_hand_size = (hands_distance((hands_position(0, "19", "x")), (hands_position(0, "19", "y")), (hands_position(0, "18", "x")), (hands_position(0, "18", "y")))) * 0.5;
        image_set('手背', "rotateZ", (0 + (hands_angle((hands_position(0, "20", "x")), (hands_position(0, "20", "y")), (hands_position(0, "18", "x")), (hands_position(0, "18", "y"))))));
        image_set('手背', "left", (400 + ((hands_position(0, "20", "x")) - Back_of_hand_size / 2)));
        image_set('手背', "top", ((hands_position(0, "20", "y")) - Back_of_hand_size / 2));
        image_set('手背', "width", (Back_of_hand_size * 1.5));
        image_set('手背', "height", Back_of_hand_size);
        span_set('手背', "fontsize", Back_of_hand_size);
        span_set('手背', "display", true);
        span_set('手背', "innerHTML", ('少澤' + '穴'));
        span_set('手背', "left", (image_get('手背', "left")));
        span_set('手背', "top", ((image_get('手背', "top")) - (Back_of_hand_size + Back_of_hand_size / 2)));
    }


    _E8_AE_8A_E6_95_B8();
    spreadsheet_insert("insertlast", String('time') + "|" + String('question') + "|" + String('original') + "|" + String('Translate into Traditional Chinese') + "|" + String('Translate into English'), 0, 0, "", Trial_calculation_table_URL, '病症', "https://script.google.com/macros/s/AKfycbxA3hhTlntwVTOcqngOC_iJL_zLmRwzcDbMYDs7FD8iinNsY9XZsMkD7AcXTIUbEc33EA/exec");
    recording_GeminiSTT_initial(0, (String(CryptoJS.AES.decrypt(_E5_8A_A0_E5_AF_86_E5_AF_86_E7_A2_BC1, 'LLM1').toString(CryptoJS.enc.Utf8)) + String(CryptoJS.AES.decrypt(_E5_8A_A0_E5_AF_86_E5_AF_86_E7_A2_BC2, 'LLM2').toString(CryptoJS.enc.Utf8))), "gemini-2.5-flash", Voice_Prompt);
    audioGeminiSTT = async function(geminiResult) {
        textarea_set('', "value", (geminiResult));

    };
    head_add_viewport(1, 1, 2, "no");
    include_file("css", "", 'https://fustyles.github.io/webduino/GameElements_20190131/test_scroll.css');
    button_create('replay', 132, 35, 0, 0, 1, null, 'Reset Conversation', 12, 999, true);
    button_create('save', 132, 35, 0, 35, 1, null, 'Save Conversation', 12, 999, true);
    button_create('upload_file', 132, 35, 132, 0, 1, null, 'Loading Conversation', 12, 999, true);
    button_create('volume_off', 132, 35, 132, 35, 1, null, 'Turn on the speaker', 12, 999, true);
    button_create('mic_off', 132, 35, 264, 0, 1, null, 'Click me to record', 12, 999, true);
    button_create('wechat', 132, 35, 264, 35, 1, null, 'Send conversation', 12, 999, true);
    textarea_create('', 0, 75, 47, 3, '請輸入對話', 1, 999, true);
    ttsSetProperty(1, 1, 1, "en-GB");
    ttsSwitch(0);
    div_create('', 395, 400, 0, 140, "solid", 1, '#000000', '#ffffff', '#000000', 20, 1, '', 999, true);
    div_create('c', 195, 400, 0, 550, "solid", 1, '#000000', '#ffffff', '#000000', 10, 1, '', 999, true);
    div_create('e', 195, 400, 200, 550, "solid", 1, '#000000', '#ffffff', '#000000', 10, 1, '', 999, true);
    div_set('', "class", 'container');
    gemini_chat_initial((String(CryptoJS.AES.decrypt(_E5_8A_A0_E5_AF_86_E5_AF_86_E7_A2_BC1, 'LLM1').toString(CryptoJS.enc.Utf8)) + String(CryptoJS.AES.decrypt(_E5_8A_A0_E5_AF_86_E5_AF_86_E7_A2_BC2, 'LLM2').toString(CryptoJS.enc.Utf8))), "gemini-2.0-flash", 1000, 1.0, ([Traditional_Chinese_Medicine_Prompt, 'And you will translate your answer as follows', Translation_Prompt, '請不要只翻譯我所說的話，你還是需要回答我的問題', '你回答的問題題中一定要有以下穴位', Acupoint_Database, '並且記住你是一個有問必答的超級中醫'].join('')));
    await delay(2);
    Identify();
    select_create('手背', 300, 50, 885, 560, '#ffffff', '#000000', 20, 1, [
        ['陽池', '陽池穴'],
        ['少澤', '少澤穴'],
        ['落枕', '落枕穴'],
        ['合谷', '合谷穴'],
        ['少衝', '少衝穴'],
        ['商陽', '商陽穴'],
        ['陽谿', '陽谿穴'],
        ['中渚', '中渚穴'],
        ['無', '無']
    ], '', 999, true);
    select_create('手掌', 300, 50, 450, 530, '#ffffff', '#000000', 20, 1, [
        ['魚際', '魚際穴'],
        ['內關', '內關穴'],
        ['太淵', '太淵穴'],
        ['中衝', '中衝穴'],
        ['列缺', '列缺穴'],
        ['前谷', '前谷穴'],
        ['神門', '神門穴'],
        ['三間', '三間穴'],
        ['二間', '二間穴'],
        ['后溪', '后溪穴'],
        ['勞宮', '勞宮穴'],
        ['井', '井穴'],
        ['無', '無']
    ], '', 999, true);
    span_create('手掌標示', 500, 450, 25, (['Please select a', '<br>', 'palm acupoint'].join('')), 999);
    span_create('手背標示', 900, 450, 25, (['Please select the ', '<br>', 'acupuncture point on', '<br>', 'the back of your hand'].join('')), 999);
    span_create('手掌', 500, 600, 50, '', 1000);
    span_create('手背', 500, 600, 50, '', 1000);
    span_set('手掌', "display", false);
    span_set('手背', "display", false);
    hands_video("block", "1", "1", "1");
    hands_startvideo_media(width, 400, "front", 0);
    hands_video_position(400, 0);
    image_create('手掌', 'https://timchien918.github.io/acupoint.png', 10, 10, 0, 0, 20000, false);
    image_create('手背', 'https://timchien918.github.io/acupoint.png', 10, 10, 0, 0, 20000, false);
    image_create('手掌圖示', 'https://i.postimg.cc/zGGD8dk8/page-0001.png', width, 400, 400, 0, 999, true);
    hands_recognitionFinish = async function() {
        hands_state(0);
        image_set('手掌', "url", 'https://timchien918.github.io/acupoint.png');
        image_set('手背', "url", 'https://timchien918.github.io/acupoint.png');
        async function gameselect_手背_onchange(event) {
            palm = '';
        };
        document.getElementById("gameselect_手背").addEventListener("change", gameselect_手背_onchange, true);
        async function gameselect_手掌_onchange(event) {
            palm = '';
        };
        document.getElementById("gameselect_手掌").addEventListener("change", gameselect_手掌_onchange, true);
        if ((width + 400) - (hands_position(0, "1", "x")) <= (width + 400) - (hands_position(0, "17", "x"))) {
            image_set('手掌圖示', "url", 'https://i.postimg.cc/zGGD8dk8/page-0001.png');
            if ((select_get('手掌', "selectedValue")) == '無' && !palm.length) {
                image_set('手掌', "display", false);
                span_set('手掌', "display", false);
            } else if ((select_get('手掌', "selectedValue")) == '魚際' || (palm.toLowerCase().indexOf('魚際'.toLowerCase()) != -1)) {
                image_set('手掌', "display", true);
                // 未完成
                Yuji();
            } else if ((select_get('手掌', "selectedValue")) == '井' || (palm.toLowerCase().indexOf('井穴'.toLowerCase()) != -1)) {
                image_set('手掌', "display", true);
                _E4_BA_95_E7_A9_B4();
            } else if ((select_get('手掌', "selectedValue")) == '內關' || (palm.toLowerCase().indexOf('內關'.toLowerCase()) != -1)) {
                image_set('手掌', "display", true);
                // 未完成
                Nei_Guan();
            } else if ((select_get('手掌', "selectedValue")) == '太淵' || (palm.toLowerCase().indexOf('太淵'.toLowerCase()) != -1)) {
                image_set('手掌', "display", true);
                // 未完成
                Tai_Yuan();
            } else if ((select_get('手掌', "selectedValue")) == '中衝' || (palm.toLowerCase().indexOf('中衝'.toLowerCase()) != -1)) {
                image_set('手掌', "display", true);
                // 未完成
                Zhongchong();
            } else if ((select_get('手掌', "selectedValue")) == '列缺' || (palm.toLowerCase().indexOf('列缺'.toLowerCase()) != -1)) {
                image_set('手掌', "display", true);
                // 未完成
                _E5_88_97_E7_BC_BA();
            } else if ((select_get('手掌', "selectedValue")) == '前谷' || (palm.toLowerCase().indexOf('前谷'.toLowerCase()) != -1)) {
                image_set('手掌', "display", true);
                // 未完成
                Qiang_Gu();
            } else if ((select_get('手掌', "selectedValue")) == '神門' || (palm.toLowerCase().indexOf('神門'.toLowerCase()) != -1)) {
                image_set('手掌', "display", true);
                // 未完成
                Shenmen();
            } else if ((select_get('手掌', "selectedValue")) == '三間' || (palm.toLowerCase().indexOf('三間'.toLowerCase()) != -1)) {
                image_set('手掌', "display", true);
                // 未完成
                Third_Point();
            } else if ((select_get('手掌', "selectedValue")) == '勞宮' || (palm.toLowerCase().indexOf('勞宮'.toLowerCase()) != -1)) {
                image_set('手掌', "display", true);
                _E5_8B_9E_E5_AE_AE();
            } else if ((select_get('手掌', "selectedValue")) == '后溪' || (palm.toLowerCase().indexOf('后溪'.toLowerCase()) != -1)) {
                image_set('手掌', "display", true);
                Hou_Xi();
            } else if ((select_get('手掌', "selectedValue")) == '二間' || (palm.toLowerCase().indexOf('二間'.toLowerCase()) != -1)) {
                image_set('手掌', "display", true);
                // 未完成
                Second_Point();
            } else {
                image_set('手掌', "display", false);
                span_set('手掌', "display", false);
            }
        } else {
            image_set('手掌', "display", false);
            span_set('手掌', "display", false);
        }
        if ((width + 400) - (hands_position(0, "1", "x")) >= (width + 400) - (hands_position(0, "17", "x"))) {
            image_set('手掌圖示', "url", 'https://i.postimg.cc/V6SCgMtj/20240325154306761-page-0001.png');
            if ((select_get('手背', "selectedValue")) == '無' && !palm.length) {
                image_set('手背', "display", false);
                span_set('手背', "display", false);
            } else if ((select_get('手背', "selectedValue")) == '落枕' || (palm.toLowerCase().indexOf('落枕'.toLowerCase()) != -1)) {
                image_set('手背', "display", true);
                // 未完成
                _E8_90_BD_E6_9E_95();
            } else if ((select_get('手背', "selectedValue")) == '合谷' || (palm.toLowerCase().indexOf('合谷'.toLowerCase()) != -1)) {
                image_set('手背', "display", true);
                // 未完成
                _E5_90_88_E8_B0_B7();
            } else if ((select_get('手背', "selectedValue")) == '少衝' || (palm.toLowerCase().indexOf('少衝'.toLowerCase()) != -1)) {
                image_set('手背', "display", true);
                // 未完成
                _E5_B0_91_E8_A1_9D();
            } else if ((select_get('手背', "selectedValue")) == '商陽' || (palm.toLowerCase().indexOf('商陽'.toLowerCase()) != -1)) {
                image_set('手背', "display", true);
                // 未完成
                _E5_95_86_E9_99_BD();
            } else if ((select_get('手背', "selectedValue")) == '中渚' || (palm.toLowerCase().indexOf('中渚'.toLowerCase()) != -1)) {
                image_set('手背', "display", true);
                _E4_B8_AD_E6_B8_9A();
            } else if ((select_get('手背', "selectedValue")) == '陽池' || (palm.toLowerCase().indexOf('陽池'.toLowerCase()) != -1)) {
                image_set('手背', "display", true);
                _E9_99_BD_E6_B1_A0();
            } else if ((select_get('手背', "selectedValue")) == '少澤' || (palm.toLowerCase().indexOf('少澤'.toLowerCase()) != -1)) {
                image_set('手背', "display", true);
                _E5_B0_91_E6_BE_A4();
            } else if ((select_get('手背', "selectedValue")) == '陽谿' || (palm.toLowerCase().indexOf('陽谿'.toLowerCase()) != -1)) {
                image_set('手背', "display", true);
                // 未完成
                Yangxi_acupoint();
            } else {
                image_set('手背', "display", false);
                span_set('手背', "display", false);
            }
        } else {
            image_set('手背', "display", false);
            span_set('手背', "display", false);
        }

        hands_state(1);
    };
    hands_unrecognitionFinish = async function() {
        hands_state(0);
        image_set('', "top", (image_get('', "top") - 10));
        image_set('手背', "display", false);
        image_set('手掌', "display", false);
        span_set('手背', "display", false);
        span_set('手掌', "display", false);

        hands_state(1);
    };
};
main();
</script>
</body></html>